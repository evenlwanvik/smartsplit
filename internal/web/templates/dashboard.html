{{ define "content" }}
<section class="hero" id="suggestion" hx-get="/suggestion" hx-trigger="load" hx-target="#suggestion" hx-swap="outerHTML">
    <div class="big">Today's suggestion</div>
    <div class="muted">Based on your last plans and muscle cooldowns.</div>
    {{ template "_suggestion.html" .Suggestion }}
</section>
<div class="grid" style="margin-top:1rem;">
    <section class="grid" style="grid-template-columns:1fr;">
        <article class="card">
            <header style="display:flex; justify-content:space-between; align-items:center;">
                <strong>New workout</strong>
            </header>
            <button data-target="new-workout-modal" onclick="document.getElementById('new-workout-modal').showModal()">
                New workout
            </button>
            <dialog id="new-workout-modal">
                <article>
                    <header>
                        <strong>Select muscles</strong>
                        <button onclick="this.closest('dialog').close()" aria-label="Close">✕</button>
                    </header>
                    <form hx-post="/plans" hx-target="#recent-plans" hx-swap="beforebegin" method="dialog">
                        <fieldset>
                            <legend>Choose muscle groups:</legend>
                            <div class="chips">
                                {{ range .Muscles }}  <!-- Assuming your Go template provides .Muscles -->
                                <label class="chip">
                                    <input type="checkbox" name="muscles" value="{{ .Name }}">
                                    {{ .Name }}
                                </label>
                                {{ end }}
                            </div>
                        </fieldset>
                        <footer>
                            <button type="submit">Log workout</button>
                        </footer>
                    </form>
                </article>
            </dialog>
        </article>
        <article class="card">
            <header><strong>Recent activity</strong></header>
            <ol id="recent-plans" class="list-unstyled" hx-get="/plans/recent" hx-trigger="load" hx-swap="innerHTML">
                <li class="muted">Loading…</li>
            </ol>
            <footer><a href="/history">See history →</a></footer>
        </article>
    </section>
    <aside class="grid" style="grid-template-columns:1fr;">
        <article class="card">
            <header><strong>Recently trained muscles</strong></header>
            <div class="chips" id="recent-muscles" hx-get="/muscles/recent" hx-trigger="load, every 30s" hx-swap="outerHTML">
                {{ template "_muscle_chips.html" .RecentMuscles }}
            </div>
        </article>
        <article class="card">
            <header><strong>This week</strong></header>
            <ul class="list-unstyled">
                <li><span class="muted">Sessions</span> <strong>{{ .KPI.Sessions }}</strong></li>
                <li><span class="muted">Unique muscles</span> <strong>{{ .KPI.UniqueMuscles }}</strong></li>
                <li><span class="muted">Run volume</span> <strong>{{ .KPI.RunKM }} km</strong></li>
            </ul>
        </article>
    </aside>
</div>
{{ end }}
{{ define "dashboard.html" }}
{{ template "base" . }}   <!-- renders base, which now pulls in the defined content -->
{{ end }}